# API地址更换说明

## 🔄 更换详情

**更换时间**：2024年12月10日  
**操作类型**：生产环境API地址更换

### 地址变更
- **旧地址**：`https://cpdllqnupdei.sealosbja.site`
- **新地址**：`https://npceaftybirq.sealosbja.site`

## ✅ 已更新的文件

### 1. 核心配置文件
- **`src/api/config.ts`** - 主要API配置文件
  ```typescript
  // 更新前
  BASE_URL: 'https://cpdllqnupdei.sealosbja.site',
  
  // 更新后  
  BASE_URL: 'https://npceaftybirq.sealosbja.site',
  ```

### 2. 文档文件
- **`API对接完成说明.md`** - API文档说明
- **`backend-api-requirements.md`** - API需求文档

## 🧪 新API地址验证

### 健康检查测试
```bash
curl https://npceaftybirq.sealosbja.site/health
```

**响应结果**：
```json
{
  "code": 200,
  "message": "success", 
  "data": {
    "status": "OK",
    "timestamp": "2025-06-10T09:38:26.274Z",
    "mongodb": "connected"
  },
  "timestamp": 1749548306274
}
```

✅ **状态**：新API地址运行正常

## 📋 功能验证清单

### 需要验证的功能
- [ ] **用户登录** - 测试账号登录
- [ ] **用户注册** - 新用户注册流程  
- [ ] **验证码发送** - 短信验证码功能
- [ ] **系统配置** - 获取系统配置信息
- [ ] **用户协议** - 获取协议内容

### 验证步骤
1. **启动应用**：确认应用正常启动
2. **测试登录**：使用测试账号登录
   - 手机号：13800000001
   - 验证码：888888
3. **测试注册**：注册新的测试账号
4. **验证API**：通过API测试页面验证各接口

## 🔧 技术细节

### 自动生效范围
由于我们使用了统一的配置管理，更换 `src/api/config.ts` 中的 `BASE_URL` 后：

- ✅ 所有HTTP请求自动指向新地址
- ✅ 登录、注册、验证码等核心功能
- ✅ 用户信息、系统配置等辅助功能
- ✅ 测试模式和正常模式都生效

### 无需额外修改的部分
- API请求封装 (`src/api/request.ts`)
- 业务服务 (`src/api/services.ts`) 
- 页面组件中的API调用
- 测试功能和测试账号

## ⚠️ 注意事项

### 1. 数据兼容性
- 新API服务器是否包含之前注册的用户数据
- 测试账号数据是否已同步到新服务器
- 如果数据不同步，可能需要重新初始化测试数据

### 2. 密码验证错误
- 如果新API服务器仍存在之前的密码验证错误
- 前端已实现的临时处理方案仍然有效
- 建议优先测试测试账号功能

### 3. 功能差异
- 新API服务器的功能实现可能与旧服务器有差异
- 建议进行全面的功能测试
- 如发现问题，及时记录并反馈

## 🎯 下一步行动

### 立即执行
1. **重启应用** - 确保新配置生效
2. **功能测试** - 验证核心功能正常
3. **记录问题** - 发现问题及时记录

### 后续跟进
1. **性能对比** - 对比新旧API服务器的响应速度
2. **稳定性监控** - 观察新API的稳定性表现
3. **用户反馈** - 收集用户使用反馈

## 📞 联系方式

如在使用过程中遇到问题：
1. **检查网络连接**
2. **查看控制台错误信息**
3. **尝试使用测试账号**
4. **记录具体错误信息并反馈**

---

**更换完成**：✅ API地址已成功更换  
**状态**：等待功能验证  
**影响**：所有API请求将指向新服务器 