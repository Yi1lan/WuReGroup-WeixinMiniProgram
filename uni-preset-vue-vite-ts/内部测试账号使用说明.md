# 内部测试账号使用说明

## 📋 概述

为了解决平台验证码功能尚未完善的问题，我们为内部开发团队创建了测试模式，可以使用固定的测试账号和验证码进行开发和测试。

## 🔧 测试模式配置

### 配置文件位置
- `src/config/test.ts` - 测试配置文件

### 主要配置
```typescript
export const TEST_CONFIG = {
  ENABLE_TEST_MODE: true,           // 是否启用测试模式
  TEST_VERIFICATION_CODE: '888888', // 固定测试验证码
  TEST_PHONE_PREFIX: '138000000',   // 测试手机号前缀
  // ... 其他配置
};
```

## 👥 预设测试账号

| 手机号 | 昵称 | 角色 | 密码 |
|--------|------|------|------|
| 13800000001 | 测试管理员 | admin | 123456 |
| 13800000002 | 测试用户1 | user | 123456 |
| 13800000003 | 测试用户2 | user | 123456 |

## 🚀 使用方法

### 方法一：快捷登录（推荐）

1. 打开登录页面
2. 在测试模式区域，点击任意测试账号按钮
3. 系统会自动填入手机号和验证码
4. 自动执行登录流程

### 方法二：手动输入

#### 登录流程
1. 输入测试手机号（13800000001-13800000003）
2. 点击"获取验证码"（系统会模拟发送成功）
3. 输入固定验证码：`888888`
4. 点击"登录"

#### 注册流程
1. 输入新的测试手机号（建议使用13800000004-13800000099）
2. 点击"获取验证码"
3. 输入固定验证码：`888888`
4. 设置密码（建议使用：`123456`）
5. 确认密码
6. 点击"注册"

### 方法三：测试数据填充

在注册页面：
1. 点击"填入测试数据"按钮
2. 系统会自动填入所有必要信息
3. 直接点击"注册"即可

## 🎯 测试场景

### 1. 新用户注册测试
- 使用手机号：13800000004-13800000099
- 验证码：888888
- 密码：123456

### 2. 现有用户登录测试
- 使用预设账号：13800000001-13800000003
- 验证码：888888

### 3. 功能测试
- 测试账号可以正常使用所有功能
- 支持完整的登录、登出流程
- 可以进行用户信息管理

## ⚠️ 注意事项

### 安全提醒
1. **测试模式仅用于开发环境**
2. **生产环境必须设置 `ENABLE_TEST_MODE: false`**
3. **测试账号信息不要泄露给外部人员**

### 使用限制
1. 测试模式下，只有以 `138000000` 开头的手机号会使用测试逻辑
2. 其他手机号仍然会调用真实的API接口
3. 测试验证码固定为 `888888`

### 调试信息
- 开发者工具控制台会显示详细的测试模式日志
- 可以通过日志确认是否使用了测试模式

## 🔄 切换到生产模式

当需要测试真实API时：

1. 修改 `src/config/test.ts`：
```typescript
export const TEST_CONFIG = {
  ENABLE_TEST_MODE: false,  // 关闭测试模式
  // ... 其他配置保持不变
};
```

2. 重新编译项目

## 📝 API模拟说明

### 发送验证码 (sendSms)
- 测试手机号：直接返回成功响应，不调用真实API
- 普通手机号：调用真实API

### 用户登录 (login)
- 测试账号 + 测试验证码：返回模拟的登录成功响应
- 其他情况：调用真实API

### 用户注册 (register)
- 测试手机号 + 测试验证码：返回模拟的注册成功响应
- 检查是否与预设账号冲突
- 其他情况：调用真实API

## 🛠️ 技术实现

### 核心文件
- `src/config/test.ts` - 测试配置和工具函数
- `src/api/services.ts` - API服务层，包含测试逻辑
- `src/pages/login/index.vue` - 登录页面，包含快捷登录
- `src/pages/register/index.vue` - 注册页面，包含测试数据填充

### 判断逻辑
```typescript
// 检查是否为测试手机号
export const isTestPhone = (phone: string): boolean => {
  if (!TEST_CONFIG.ENABLE_TEST_MODE) return false;
  return phone.startsWith(TEST_CONFIG.TEST_PHONE_PREFIX);
};

// 检查是否为测试验证码
export const isTestVerificationCode = (code: string): boolean => {
  return TEST_CONFIG.ENABLE_TEST_MODE && code === TEST_CONFIG.TEST_VERIFICATION_CODE;
};
```

## 📞 技术支持

如果在使用测试模式时遇到问题：

1. 检查控制台日志，确认是否正确识别为测试模式
2. 确认手机号格式是否正确（以138000000开头）
3. 确认验证码是否为888888
4. 检查 `TEST_CONFIG.ENABLE_TEST_MODE` 是否为 `true`

---

**最后更新**: 2024年12月10日  
**版本**: 1.0.0  
**维护者**: 开发团队 